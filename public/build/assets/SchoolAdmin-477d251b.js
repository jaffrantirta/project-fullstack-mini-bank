import{r as D,_ as P,j as s,a as e,d as j}from"./app-75ecb23e.js";import{M as C,S as A,D as B}from"./SecondaryButton-1a158e62.js";import{I as E}from"./InputError-06ff46e9.js";import{T as M,a as r,b as t,c as l,P as $}from"./Tr-483d6310.js";import{T as w}from"./index-968e51c1.js";import"./transition-47a1610c.js";function G(n){const[x,i]=D.useState(!1),{data:S,setData:y,get:K,delete:b,processing:_,reset:c,hasErrors:v}=P({id:"",search:"",user_id:"",role_name:"school-admin"});console.log(n);const d=()=>{i(!1),c()},I=a=>{a.preventDefault(),b(route("role.destroy",S.user_id),{preserveScroll:!0,onSuccess:()=>d(),onFinish:()=>c()})};return s("div",{children:[e("h2",{className:"px-10 text-xl font-bold",children:"Admin Sekolah"}),s("div",{className:"overflow-x-auto p-5 md:p-10",children:[s(M,{children:[e("thead",{children:s(r,{children:[e(t,{children:"No."}),e(t,{children:"Nomor Identitas (NIS/NIP)"}),e(t,{children:"Nama"}),e(t,{children:"Kelas/Sekolah"}),e(t,{children:"Aksi"})]})}),e("tbody",{children:n.school_admins.data.length>0?n.school_admins.data.map((a,m)=>{var h,p,u,f,N,k,g;return s(r,{children:[e(l,{children:n.school_admins.from+m}),e(l,{children:((h=a.employee)==null?void 0:h.NIP)||((p=a.student)==null?void 0:p.NIS)}),e(l,{children:a.name}),e(l,{children:a.student!==null?`${(u=a.student)==null?void 0:u.classroom.class} ${(f=a.student)==null?void 0:f.classroom.name} - ${(N=a.student)==null?void 0:N.classroom.school.name}`:(g=(k=a.employee)==null?void 0:k.schools)==null?void 0:g.map((o,T)=>s("p",{children:[T+1,"."," ",o.name]},o.id))}),e(l,{className:"flex gap-3",children:e(j,{className:"hover:bg-gray-200 p-2 ",onClick:o=>{o.preventDefault(),y("user_id",a.id),i(!0)},children:e(w,{className:"h-5 text-red-400"})})})]},m)}):e(r,{children:e(l,{colSpan:4,className:"text-center",children:"Tidak ada staff ditemukan."})})})]}),e($,{className:"mt-5",data:n.school_admins})]}),e(C,{show:x,onClose:d,children:s("form",{onSubmit:I,className:"p-6",children:[e("h2",{className:"text-lg font-medium text-gray-900",children:"Yakin hapus?"}),e("p",{className:"mt-1 text-sm text-gray-600",children:"Ketika dihapus, user tidak bisa mendapatkan akses ke admin dan perlu ditambahkan kembali."}),v&&e(E,{message:"Oops! Sepertinya ada kesalahan"}),s("div",{className:"mt-6 flex justify-end",children:[e(A,{onClick:d,children:"Batal"}),e(B,{className:"ml-3",disabled:_,children:"Ya, Hapus!"})]})]})})]})}export{G as default};
