import{_ as b,r as N,j as e,a,d as x,F as S}from"./app-75ecb23e.js";import{I as r}from"./InputError-06ff46e9.js";import{I as l}from"./InputLabel-4142342c.js";import{P as u}from"./PrimaryButton-f9cb5f16.js";import{T as o}from"./TextInput-35942232.js";import{S as h}from"./Select-03b6baaf.js";import{t as w}from"./transition-47a1610c.js";function B({className:p,...n}){var m;const{data:i,setData:c,errors:s,post:_,processing:g,recentlySuccessful:v}=b({transaction_type:"",amount:"",account_id:"",transaction_id:n.transaction_id||"",user_id:(m=n.user)==null?void 0:m.user.id,transaction_code:n.transaction_code||"",transaction_date:new Date().toISOString().slice(0,10)}),[f,d]=N.useState(n.balance);return e("section",{className:p,children:[e("header",{children:[a("h2",{className:"text-lg font-medium text-gray-900",children:"Buat Transaksi Baru"}),a("p",{className:"mt-1 text-sm text-gray-600"})]}),e("form",{onSubmit:t=>{t.preventDefault(),_(route("transaction.store"),{onSuccess:({props:y})=>console.log(y.transaction_id,"response")})},className:"mt-6 space-y-6",children:[e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e("div",{children:[a(l,{htmlFor:"transaction_type",value:"Jenis Simpanan"}),e(h,{id:"transaction_type",name:"transaction_type",className:"mt-1 block w-full",value:i.transaction_type,onChange:t=>c("transaction_type",t.target.value),required:!0,children:[a("option",{value:"",children:"Pilih Jenis Simpanan"}),a("option",{value:"deposit",children:"Kredit"}),a("option",{value:"withdraw",children:"Debit"})]}),a(r,{message:s.transaction_type,className:"mt-2"})]}),e("div",{children:[a(l,{htmlFor:"transaction_date",value:"Tanggal Transaksi"}),a(o,{id:"transaction_date",value:i.transaction_date,onChange:t=>c("transaction_date",t.target.value),type:"date",className:"mt-1 block w-full",...n.session.roles.some(t=>t.name==="super-admin"||t.name==="school-admin")?{disabled:!1}:{disabled:!0}}),a(r,{message:s.transaction_date,className:"mt-2"})]}),e("div",{children:[a(l,{htmlFor:"account_id",value:"Kode Transaksi"}),e(h,{id:"account_id",name:"account_id",className:"mt-1 block w-full",value:i.account_id,onChange:t=>c("account_id",t.target.value),required:!0,children:[a("option",{value:"",children:"Pilih Akun"}),n.accounts.filter(t=>t.type===i.transaction_type).map(t=>e("option",{value:t.id,children:[t.code," - ",t.name]},t.id))]}),a(r,{message:s.transaction_date,className:"mt-2"})]}),e("div",{children:[a(l,{htmlFor:"amount",value:"Jumlah"}),a(o,{id:"amount",value:i.amount,onChange:t=>{c("amount",t.target.value),i.transaction_type=="deposit"&&d(parseInt(n.balance)+parseInt(t.target.value)),i.transaction_type=="withdraw"&&d(parseInt(n.balance)-parseInt(t.target.value))},type:"text",className:"mt-1 block w-full"}),a(r,{message:s.amount,className:"mt-2"})]}),e("div",{children:[a(l,{htmlFor:"final_balance",value:"Saldo Akhir"}),a(o,{id:"final_balance",value:f,type:"text",className:"mt-1 block w-full",disabled:!0}),a(r,{message:s.final_balance,className:"mt-2"})]})]}),e("div",{className:"flex items-center gap-4 mt-5",children:[a(u,{disabled:g,children:"Simpan"}),n.transaction_id?a(x,{href:`/print/${n.transaction_id}`,children:a(u,{children:"Print"})}):a(S,{}),a(w,{show:v,enterFrom:"opacity-0",leaveTo:"opacity-0",className:"transition ease-in-out",children:a("p",{className:"text-sm text-gray-600",children:"Tersimpan."})})]})]})]})}export{B as default};
